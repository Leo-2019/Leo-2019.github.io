---
title: SPI
tags:
  - 笔记
categories:
  - 技术
date: 2025-12-01 20:20:35
---

<blockquote class="blockquote-center">
SPI
</blockquote>

<!-- more -->

主机(Master)将要发送的数据写到发送数据缓存区(Menory)，缓存区经过移位寄存器(0~7)，串行移位寄存器通过MoSI信号线将字节一位一位的移出去传送给从机，，同时MISO接口接收到的数据经过移位寄存器一位一位的移到接收缓存区。
 [图像] 
从机(Slave)也将自己的串行移位寄存器(0~7)中的内容通过MISO信号线返回给主机。同时通过MOSI信号线接收主机发送的数据，这样，两个移位寄存器中的内容就被交换。
 
 [在这里插入图片描述] 
每个时钟周期，主设备和从设备都会移位一位数据，形成同步交换。
 
SPI只有主模式和从模式之分，没有读和写的说法，外设的写操作和读操作是同步完成的。如果只进行写操作，主机只需忽略接收到的字节；反之，若主机要读取从机的一个字节，就必须发送一个空字节来引发从机的传输。也就是说，你发一个数据必然会收到一个数据；你要收一个数据必须也要先发一个数据。
 
那么如何判定当前收到的数据时有效数据呢？
主设备无法“自动”判断数据是否有效，必须依赖 协议约定（字节序、状态字节、延迟、校验）。这也是为什么 SPI 通信通常需要 严格遵循设备手册。
 
 
SPI 四种模式：
主从设备的在通信时 数据采样时刻 和触发时刻 应想匹配。但不同厂商的设备，使从设备的不一样，所以就需要用 不同的模式调整，使其两端匹配。
 [在这里插入图片描述] 
 [图像]

---
