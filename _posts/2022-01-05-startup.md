---
layout: post
title: startUp
subtitle: 程序梳理
author: Leo
date: 2020-02-23
categories: blog
tags: [radio]
---

<p align="center">

<a href="https://github.com/Leo-2019" target="_blank">
	<img src="https://github.com/Leo-2019/Picture/blob/main/pictures/logo/square_mid.jpg?raw=true" width=""/>
</a>

</p>

<p align="center">
  <a href="https://github.com/Leo-2019"><img src="https://img.shields.io/badge/Author-Leo-blue.svg"></a>
  <a href="https://www.ericsson.com"><img src="https://img.shields.io/badge/company-Ericssion-brightgreen.svg"></a>
  <a href="https://internal.ericsson.com/org/31580708?unit=31580708"><img src="https://img.shields.io/badge/Unit-RPCN_SWD_APP4-red.svg"></a>
</p>

<h3 align="center">APP Start Up</h3>

---

> 1. **介绍**：文章主要记录笔者在入职初期对于RBS radio中APP software 部分的学习过程和理解。内容会随着笔者的成长持续性的更正和更新。
> 2. **贡献指南** ：在此非常感谢Hongshuang对本人在这部分学习时的指导和建议。👍
> 3. **联系邮箱** ： leo.c.li@ericsson.com 。
> 4. **欢迎指教** ：由于笔者目前属于行业新人，对于某些内容的理解较浅，若内容有误，欢迎指出。
> 5. **转载须知** ：以下文章如非文首说明皆为原创，转载请在文首注明出处，请勿恶意抄袭/搬运。让我们一起维护一个良好的技术创作环境！⛽️

## Contents

[toc]

要写的内容


## radio 架构

### 功能域



> *XCS是一个使服务能够在 CPU 系统上运行的基于 Linux的软件平台。*


## 0.信息处理过程



## 1. 软件总体架构



## 2. 启动程序入口

> sw -> app -> om -> src -> startUp -> src -> startUpProcess.cc -> OS_PROCESS(startUp) -> initOmLayer()

 *程序启动先从上面OM层开始*

## 3. 程序流程

### 3.1 软件层次模型



### 3.2 程序调用流程



> **StartUpinit处理过程：**



### 3.3 流程梳理



## 4. database

### 4.1 DB分类



* **External DB** ：不是rafio软件负责，编译时编到软件包里，硬件或系统提供的DB。
* **Internal DB** : radio负责。
  
  * driverSets.txt

    TRX driver sets

    PA driver sets

    TX  & RX types (driver sets)

  * deviceDrivers.txt

    Device drivers  

  * board.txt
  
    Board related parameters

  * channels.txt
  
    Channels

    Switches

    Indicators

  * **serviceSets.txt**
  
    Tx services

    RX services

    Equipment services

  * supervision.txt
  
    Supervision

  * functional.txt
  
    Functional parameters

    Link control

    Frequency band configuration

    Frequency correction / Hop / Scaling

    Temperature correction

    Gain control

    Filters / Filter correction / IQ mod

  * selfTest.txt
  
    Self test related DB

    antennaServices.txt

    Antenna related services.

  * resourceSets.txt
  
    Resource handler related

* **Type 2 DB**：也叫“Production Database”，在工厂里生产环节烧到radio的Nor Flash中, 但是在站上烧进去就换不了了。[system/dev/mtdxx]
  * Pboot parameters
  * Boot parameters
  * Boot env parameters
  * Hwlog :在flash中，掉电还在
  * Elog
  * Board parameter：mac地址等
  * Pa DB：校验
  * Production DB
  * Etc.
  


### 4.2 DB 规则

database中的数据项分为3部分：key（键）-type（值的类型）-value（值）。

* key键
  
  以斜杠/分隔的标识符列表。标识符称为segments。大多数key是从数据库本身获取的，因为数据是使用大量间接寻址来构建的。只有驱动程序集的key在radio App程序中硬编码写死的（目录是写死的）。

* type是值的类型包含：char, U8, U16, U32, S8, S16, S32。
  
* value 是类型"char"的字符串或整数类型的数组。


### 4.3 AutoGet()

软件使用autoGet的方法检索大多数参数。


